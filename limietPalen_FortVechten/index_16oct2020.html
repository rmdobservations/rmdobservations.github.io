/*
Filename: showpoints.js
Purpose: Handle input and output from showpoints.html
Setup: 
*/
var ns = { // your namespace
	my_value: 1,
	ClassA: function() { 
// a class inside the namespace
        this.class_property= 12,
        this.class_method= function() {
            console.log("My property: " + this.class_property);
        }
    },
    myFunction: function() { // a function inside a namespace
        console.log("I can access namepsace value if you don't use 'new': " + this.my_value);
    }
};



		var ClassB = function (a) { 
		this.map= null;
		this.projectprefix= "pal";	
		this.datapath= "./data/json/";
		this.versionIndex= 0;
		this.dom_element= ".dom_element";
		this.slide_element=  ".slide_element";
		this.slide_element_class= "slide_element";
		this.mapzoom= 14;
		this.createSlideShow = function (b) {
			b=20;
			console.log("testing slide show function: ",this);
			console.log("testing slide show parameter: ",b);
	};
};
var MyNamespace = MyNamespace || {};
MyNamespace.ClassB = new ClassB();

MyNamespace.ClassB.createSlideShow(10);


	



var mapfunction = function(){
	var rmdgetData = async function() {
    try {
    	var filename = "./data/json/pal_1.json";
    	
		// significant breakthrough here. geojson is unpacked here.
		// Because it takes time to read, features are not always available
		// Until the promise is kept.	
		return await $.getJSON(filename)
		.done(function(data){
				console.log("in success: ",data)
				})
		.fail(function(data){console.log("In failure: File not found",data)})
		.promise();
    }
    catch (error) {
    	alert("This applcation works only on the desktop")
       console.log("In handler files event..catch error..." + error);
    }
    finally {
        console.log('Finished loading file');
   	 }
	}	
	
	rmdgetData().then(jsondataObj => {
	
	$.when(createMap(jsondataObj)).done(function(map)
		{
			GD.map = map;
			$.when(createSlideshow(GD)).done(function(result)
			{

				console.group("After slide show: ",result)
				
			$.when(setupInteractive(GD)).done(function(result)
			{
				console.log("This has no purpose: ",result)	;	
			})

		}) 
 		})
})

} // main program
//})(); 



	$(document).ready(function() {

	mapfunction();
	});
